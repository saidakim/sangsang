        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');
        
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            font-family: 'Noto Sans KR', sans-serif;
            overflow: hidden;
        }

        .game-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100vw;
            height: 100vh;
        }

        .game-container {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 1280px;
            max-aspect-ratio: 16/9;
            background: #111;
            box-shadow: 0 0 50px rgba(0,0,0,0.8);
            overflow: hidden;
        }

        /* 레이어 레이아웃 */
        #bg-layer { position: absolute; inset: 0; background-size: cover; background-position: center; transition: background-image 1s ease-in-out; z-index: 10; background-color: #111; }
        #cg-layer { position: absolute; inset: 0; z-index: 30; background-size: cover; background-position: center; opacity: 0; transition: opacity 0.8s ease; pointer-events: none; background-color: rgba(0,0,0,0.5); }
        #cg-layer.active { opacity: 1; pointer-events: auto; }
        /* style.css */
        #management-layer {
            display: none;
            position: absolute;
            inset: 0;
            z-index: 800; /* 충분히 높은 번호 */
            pointer-events: none; /* 기본은 통과 */
            opacity: 0;
            transition: opacity 0.3s;
        }

        #management-layer.active {
            display: flex !important;
            opacity: 1;
            pointer-events: auto; /* [핵심] 활성화되었을 때만 클릭 허용 */
        }

        /* 선택지 컨테이너가 육성 화면 버튼을 가리지 않도록 주의 */
        #choice-container {
            z-index: 900; 
        }
        /* 캐릭터 레이어 (멀티 캐릭터 대응) */
        #character-layer { 
            position: absolute; 
            bottom: 80px; 
            left: 0;
            right: 0;
            height: 85%; 
            z-index: 20; 
            display: flex; 
            justify-content: center;
            align-items: flex-end; 
            pointer-events: none;
            gap: 20px;
            padding: 0 50px;
        }
        
        .char-unit {
            height: 100%;
            transition: all 0.5s ease;
            display: flex;
            align-items: flex-end;
            position: relative;
        }

        .char-img { 
            height: 100%; 
            object-fit: contain; 
            transition: all 0.5s ease; 
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5)); 
        }

        /* 포커스 효과: 대화 중이지 않은 캐릭터는 어둡게 */
        .char-unit.unfocused {
            filter: brightness(0.4) grayscale(0.3);
            transform: scale(0.95);
        }

        /* --- 캐릭터 애니메이션 효과 --- */
        .eff-shake { animation: shake 0.4s ease-in-out; }
        .eff-bounce { animation: bounce 0.5s ease-out; }
        .eff-zoom { animation: zoom 0.4s ease-in-out; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-15px); }
            75% { transform: translateX(15px); }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-40px); }
        }
        @keyframes zoom {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* 대화창 */
        .dialogue-box {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 94%;
            max-width: 1100px;
            height: 180px;
            background: rgba(10, 10, 20, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 30px 45px;
            color: #eee;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 15px 35px rgba(0,0,0,0.7);
        }

        /* 선택지 */
        #choice-container { 
            position: absolute; 
            top: 45%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            width: 100%; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            z-index: 200; 
        }
        .choice-btn { 
            width: 450px; 
            max-width: 85%;
            padding: 22px; 
            margin: 12px; 
            background: rgba(30, 30, 50, 0.95); 
            border: 1px solid rgba(255, 255, 255, 0.2); 
            color: white; 
            border-radius: 15px; 
            text-align: center; 
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            font-size: 1.15rem;
            font-weight: 500;
        }
        .choice-btn:hover { background: #4f46e5; border-color: #818cf8; transform: scale(1.05); }

        /* 하단 메뉴 */
        .bottom-menu {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 25px;
            z-index: 150;
        }
        .bottom-menu button {
            font-size: 0.7rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.3);
            letter-spacing: 0.15em;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        .bottom-menu button:hover { color: #fff; }

        /* 오버레이 */
        .full-overlay {
            position: absolute;
            inset: 0;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }
        .full-overlay.active { opacity: 1; visibility: visible; }

        .menu-overlay { background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%); z-index: 950; }
        .title-logo { font-size: clamp(3rem, 10vw, 5rem); font-weight: 900; color: white; letter-spacing: 0.2em; margin-bottom: 4rem; text-align: center; }

        .slot-item { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); padding: 16px; margin-bottom: 12px; border-radius: 14px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: 0.2s; }
        .slot-item:hover { background: rgba(79, 70, 229, 0.15); border-color: #6366f1; }

        /* style.css 하단에 추가 */

/* style.css */

#phone-layer {
    z-index: 3000 !important; /* 모든 것보다 위 */
    display: none;
}

#phone-layer.active {
    display: flex !important;
}

/* 채팅창 영역이 버튼을 가리지 않도록 설정 */
#chat-content {
    display: flex;
    flex-direction: column;
    width: 100%;
    /* 스크롤이 생겨도 버튼 영역을 침범하지 않음 */
}

/* [중요] 닫기 버튼이 확실히 클릭되도록 */
#phone-layer button {
    cursor: pointer !important;
    pointer-events: auto !important; /* 클릭 이벤트 강제 허용 */
}

/* style.css */

/* 육성 레이어의 위치 */
#management-layer {
    z-index: 800 !important; /* 육성 화면은 800 */
}

/* 선택지(활동 목록) 레이어 - 육성 화면보다 높아야 함 */
#choice-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2000 !important; /* 2000으로 대폭 상승 */
    display: none; /* 기본 숨김 */
    flex-direction: column;
    align-items: center;
    width: 100%;
}

/* hidden이 제거되었을 때 확실히 보이게 함 */
#choice-container:not(.hidden) {
    display: flex !important;
}